import {
  AcademicCapIcon,
  ArrowDownTrayIcon,
  BuildingOffice2Icon,
  CalendarIcon,
  FlagIcon,
  MapIcon,
  SparklesIcon,
} from '@heroicons/react/24/outline';

import GithubIcon from '../components/Icon/GithubIcon';
import InstagramIcon from '../components/Icon/InstagramIcon';
import LinkedInIcon from '../components/Icon/LinkedInIcon';
import TwitterIcon from '../components/Icon/TwitterIcon';
import heroImage from '../images/header-background.webp';
import profilepic from '../images/profilepic.jpg';
import {
  About,
  ContactSection,
  ContactType,
  Hero,
  HomepageMeta,
  PortfolioItem,
  SkillGroup,
  Social,
  TimelineItem,
} from './dataDef';

/**
 * Page meta data
 */
export const homePageMeta: HomepageMeta = {
  title: 'My Portfolio',
  description: 'Personal portfolio website',
};

/**
 * Section definition
 */
export const SectionId = {
  Hero: 'hero',
  About: 'about',
  Contact: 'contact',
  Portfolio: 'portfolio',
  Resume: 'resume',
  Skills: 'skills',
  Stats: 'stats',
  Testimonials: 'testimonials',
} as const;

export type SectionId = (typeof SectionId)[keyof typeof SectionId];

// Sanity data storage
let sanityAbout: any = null;
let sanityProjects: any[] = [];
let sanitySkills: any[] = [];
let sanitySocials: any[] = [];

// Function to set Sanity data (called from client component)
export function setSanityData(about: any, projects: any[], skills: any[], socials: any[]) {
  sanityAbout = about;
  sanityProjects = projects || [];
  sanitySkills = skills || [];
  sanitySocials = socials || [];
}

/**
 * Hero section
 */
export const heroData: Hero = {
  get imageSrc() {
    return sanityAbout?.heroImage || heroImage.src;
  },
  get name() {
    return sanityAbout?.name || "I'm Your Name";
  },
  get description() {
    return (
      <>
        <p className="prose-sm text-stone-200 sm:prose-base lg:prose-lg">
          {sanityAbout?.tagline || 'Your tagline here'}
        </p>
        {sanityAbout?.bio && (
          <p className="prose-sm text-stone-200 sm:prose-base lg:prose-lg">
            {sanityAbout.bio}
          </p>
        )}
      </>
    );
  },
  get actions() {
    return [
      {
        href: sanityAbout?.resumeUrl || '/assets/resume.pdf',
        text: 'Resume',
        primary: true,
        Icon: ArrowDownTrayIcon,
      },
      {
        href: `#${SectionId.Contact}`,
        text: 'Contact',
        primary: false,
      },
    ];
  },
};

/**
 * About section
 */
export const aboutData: About = {
  get profileImageSrc() {
    return sanityAbout?.profileImage || profilepic.src;
  },
  get description() {
    return sanityAbout?.description || sanityAbout?.bio || 'Tell us about yourself...';
  },
  get aboutItems() {
    return [
      ...(sanityAbout?.location ? [{ label: 'Location', text: sanityAbout.location, Icon: MapIcon }] : []),
      ...(sanityAbout?.age ? [{ label: 'Age', text: sanityAbout.age.toString(), Icon: CalendarIcon }] : []),
      ...(sanityAbout?.nationality ? [{ label: 'Nationality', text: sanityAbout.nationality, Icon: FlagIcon }] : []),
      ...(sanityAbout?.interests ? [{ label: 'Interests', text: sanityAbout.interests, Icon: SparklesIcon }] : []),
      ...(sanityAbout?.study ? [{ label: 'Study', text: sanityAbout.study, Icon: AcademicCapIcon }] : []),
      ...(sanityAbout?.employment ? [{ label: 'Employment', text: sanityAbout.employment, Icon: BuildingOffice2Icon }] : []),
    ];
  },
};

/**
 * Skills section
 */
export const skills: SkillGroup[] = [];

Object.defineProperty(skills, 'length', {
  get() {
    const skillGroups = sanitySkills && sanitySkills.length > 0
      ? [
          {
            name: 'Technical Skills',
            skills: sanitySkills.map((skill: any) => ({
              name: skill.name,
              level: skill.level || 8,
              max: 10,
            })),
          },
        ]
      : [];
    skills.splice(0, skills.length, ...skillGroups);
    return skillGroups.length;
  },
});

/**
 * Portfolio section
 */
export const portfolioItems: PortfolioItem[] = [];

Object.defineProperty(portfolioItems, 'length', {
  get() {
    const items = sanityProjects.map((project: any) => ({
      title: project.name || project.fullName || 'Project',
      description: project.description || '',
      url: project.url || project.githubUrl || '#',
      image: project.screenshot || project.image || '/work/test-image.png',
    }));
    portfolioItems.splice(0, portfolioItems.length, ...items);
    return items.length;
  },
});

/**
 * Resume section
 */
export const education: TimelineItem[] = [];

export const experience: TimelineItem[] = [];

/**
 * Contact section
 */
export const contact: ContactSection = {
  get headerText() {
    return 'Get in touch.';
  },
  get description() {
    return 'Feel free to reach out for collaborations or just a friendly chat!';
  },
  get items() {
    return [
      {
        type: ContactType.Email,
        text: sanityAbout?.email || 'your.email@example.com',
        href: `mailto:${sanityAbout?.email || 'your.email@example.com'}`,
      },
      ...(sanityAbout?.phone
        ? [
            {
              type: ContactType.Phone,
              text: sanityAbout.phone,
              href: `tel:${sanityAbout.phone}`,
            },
          ]
        : []),
      ...(sanityAbout?.location
        ? [
            {
              type: ContactType.Location,
              text: sanityAbout.location,
            },
          ]
        : []),
    ];
  },
};

/**
 * Social items
 */
export const socialLinks: Social[] = [];

Object.defineProperty(socialLinks, 'length', {
  get() {
    const links = sanitySocials.map((social: any) => {
      let Icon = GithubIcon;
      const platform = social.platform?.toLowerCase() || social.name?.toLowerCase() || '';
      
      if (platform.includes('github')) Icon = GithubIcon;
      else if (platform.includes('linkedin')) Icon = LinkedInIcon;
      else if (platform.includes('twitter') || platform.includes('x')) Icon = TwitterIcon;
      else if (platform.includes('instagram')) Icon = InstagramIcon;

      return {
        label: social.platform || social.name,
        Icon,
        href: social.url,
      };
    });
    socialLinks.splice(0, socialLinks.length, ...links);
    return links.length;
  },
});

/**
 * Hero section
 */
export const heroData: Hero = {
  imageSrc: heroImage,
  name: "I'm Your Name",
  description: (
    <>
      <p className="prose-sm text-stone-200 sm:prose-base lg:prose-lg">
        Your tagline here
      </p>
    </>
  ),
  actions: [
    {
      href: '/assets/resume.pdf',
      text: 'Resume',
      primary: true,
      Icon: ArrowDownTrayIcon,
    },
    {
      href: `#${SectionId.Contact}`,
      text: 'Contact',
      primary: false,
    },
  ],
};

// Export getter functions that use Sanity data
export function getHeroData(): Hero {
  return {
    imageSrc: sanityAbout?.heroImage || heroImage.src,
    name: sanityAbout?.name || "I'm Your Name",
    description: (
      <>
        <p className="prose-sm text-stone-200 sm:prose-base lg:prose-lg">
          {sanityAbout?.tagline || 'Your tagline here'}
        </p>
        {sanityAbout?.bio && (
          <p className="prose-sm text-stone-200 sm:prose-base lg:prose-lg">
            {sanityAbout.bio}
          </p>
        )}
      </>
    ),
    actions: [
      {
        href: sanityAbout?.resumeUrl || '/assets/resume.pdf',
        text: 'Resume',
        primary: true,
        Icon: ArrowDownTrayIcon,
      },
      {
        href: `#${SectionId.Contact}`,
        text: 'Contact',
        primary: false,
      },
    ],
  };
}

/**
 * About section
 */
export const aboutData: About = {
  profileImageSrc: profilepic,
  description: `Tell us about yourself...`,
  aboutItems: [],
};

export function getAboutData(): About {
  return {
    profileImageSrc: sanityAbout?.profileImage || profilepic.src,
    description: sanityAbout?.description || sanityAbout?.bio || 'Tell us about yourself...',
    aboutItems: [
      ...(sanityAbout?.location ? [{ label: 'Location', text: sanityAbout.location, Icon: MapIcon }] : []),
      ...(sanityAbout?.age ? [{ label: 'Age', text: sanityAbout.age.toString(), Icon: CalendarIcon }] : []),
      ...(sanityAbout?.nationality ? [{ label: 'Nationality', text: sanityAbout.nationality, Icon: FlagIcon }] : []),
      ...(sanityAbout?.interests ? [{ label: 'Interests', text: sanityAbout.interests, Icon: SparklesIcon }] : []),
      ...(sanityAbout?.study ? [{ label: 'Study', text: sanityAbout.study, Icon: AcademicCapIcon }] : []),
      ...(sanityAbout?.employment ? [{ label: 'Employment', text: sanityAbout.employment, Icon: BuildingOffice2Icon }] : []),
    ],
  };
}

/**
 * Skills section
 */
export const skills: SkillGroup[] = [];

export function getSkillsData(): SkillGroup[] {
  if (sanitySkills && sanitySkills.length > 0) {
    return [
      {
        name: 'Technical Skills',
        skills: sanitySkills.map((skill: any) => ({
          name: skill.name,
          level: skill.level || 8,
          max: 10,
        })),
      },
    ];
  }
  return [];
}

/**
 * Portfolio section
 */
export const portfolioItems: PortfolioItem[] = [];

export function getPortfolioItems(): PortfolioItem[] {
  return sanityProjects.map((project: any) => ({
    title: project.name || project.fullName || 'Project',
    description: project.description || '',
    url: project.url || project.githubUrl || '#',
    image: project.screenshot || project.image || '/work/test-image.png',
  }));
}

/**
 * Resume section
 */
export const education: TimelineItem[] = [];

export const experience: TimelineItem[] = [];

/**
 * Contact section
 */
export const contact: ContactSection = {
  headerText: 'Get in touch.',
  description: 'Feel free to reach out!',
  items: [],
};

export function getContactData(): ContactSection {
  return {
    headerText: 'Get in touch.',
    description: 'Feel free to reach out for collaborations or just a friendly chat!',
    items: [
      {
        type: ContactType.Email,
        text: sanityAbout?.email || 'your.email@example.com',
        href: `mailto:${sanityAbout?.email || 'your.email@example.com'}`,
      },
      ...(sanityAbout?.phone
        ? [
            {
              type: ContactType.Phone,
              text: sanityAbout.phone,
              href: `tel:${sanityAbout.phone}`,
            },
          ]
        : []),
      ...(sanityAbout?.location
        ? [
            {
              type: ContactType.Location,
              text: sanityAbout.location,
            },
          ]
        : []),
    ],
  };
}

/**
 * Social items
 */
export const socialLinks: Social[] = [];

export function getSocialLinksData(): Social[] {
  return sanitySocials.map((social: any) => {
    let Icon = GithubIcon;
    const platform = social.platform?.toLowerCase() || social.name?.toLowerCase() || '';
    
    if (platform.includes('github')) Icon = GithubIcon;
    else if (platform.includes('linkedin')) Icon = LinkedInIcon;
    else if (platform.includes('twitter') || platform.includes('x')) Icon = TwitterIcon;
    else if (platform.includes('instagram')) Icon = InstagramIcon;

    return {
      label: social.platform || social.name,
      Icon,
      href: social.url,
    };
  });
}

/**
 * Page meta data
 */
export const homePageMeta: HomepageMeta = {
  title: 'React Resume Template',
  description: "Example site built with Tim Baker's react resume template",
};

/**
 * Section definition
 */
export const SectionId = {
  Hero: 'hero',
  About: 'about',
  Contact: 'contact',
  Portfolio: 'portfolio',
  Resume: 'resume',
  Skills: 'skills',
  Stats: 'stats',
  Testimonials: 'testimonials',
} as const;

export type SectionId = (typeof SectionId)[keyof typeof SectionId];

/**
 * Hero section
 */
export const heroData: Hero = {
  imageSrc: heroImage,
  name: `I'm Tim Baker.`,
  description: (
    <>
      <p className="prose-sm text-stone-200 sm:prose-base lg:prose-lg">
        I'm a Victoria based <strong className="text-stone-100">Full Stack Software Engineer</strong>, currently working
        at <strong className="text-stone-100">Instant Domains</strong> helping build a modern, mobile-first, domain
        registrar and site builder.
      </p>
      <p className="prose-sm text-stone-200 sm:prose-base lg:prose-lg">
        In my free time time, you can catch me training in <strong className="text-stone-100">Muay Thai</strong>,
        plucking my <strong className="text-stone-100">banjo</strong>, or exploring beautiful{' '}
        <strong className="text-stone-100">Vancouver Island</strong>.
      </p>
    </>
  ),
  actions: [
    {
      href: '/assets/resume.pdf',
      text: 'Resume',
      primary: true,
      Icon: ArrowDownTrayIcon,
    },
    {
      href: `#${SectionId.Contact}`,
      text: 'Contact',
      primary: false,
    },
  ],
};

/**
 * About section
 */
export const aboutData: About = {
  profileImageSrc: profilepic,
  description: `Use this bio section as your way of describing yourself and saying what you do, what technologies you like
  to use or feel most comfortable with, describing your personality, or whatever else you feel like throwing
  in.`,
  aboutItems: [
    {label: 'Location', text: 'Victoria, BC', Icon: MapIcon},
    {label: 'Age', text: '29', Icon: CalendarIcon},
    {label: 'Nationality', text: 'Canadian / Irish', Icon: FlagIcon},
    {label: 'Interests', text: 'Motorcycles, Muay Thai, Banjos', Icon: SparklesIcon},
    {label: 'Study', text: 'University of Victoria', Icon: AcademicCapIcon},
    {label: 'Employment', text: 'Instant Domains, inc.', Icon: BuildingOffice2Icon},
  ],
};

/**
 * Skills section
 */
export const skills: SkillGroup[] = [
  {
    name: 'Spoken languages',
    skills: [
      {
        name: 'English',
        level: 10,
      },
      {
        name: 'French',
        level: 4,
      },
      {
        name: 'Spanish',
        level: 3,
      },
    ],
  },
  {
    name: 'Frontend development',
    skills: [
      {
        name: 'React',
        level: 9,
      },
      {
        name: 'Typescript',
        level: 7,
      },
      {
        name: 'GraphQL',
        level: 6,
      },
    ],
  },
  {
    name: 'Backend development',
    skills: [
      {
        name: 'Node.js',
        level: 8,
      },
      {
        name: 'Rust',
        level: 5,
      },
      {
        name: 'Golang',
        level: 4,
      },
    ],
  },
  {
    name: 'Mobile development',
    skills: [
      {
        name: 'React Native',
        level: 9,
      },
      {
        name: 'Flutter',
        level: 4,
      },
      {
        name: 'Swift',
        level: 3,
      },
    ],
  },
];

/**
 * Portfolio section
 */
export const portfolioItems: PortfolioItem[] = [
  {
    title: 'Project title 1',
    description: 'Give a short description of your project here.',
    url: 'https://reactresume.com',
    image: porfolioImage1,
  },
  {
    title: 'Project title 2',
    description: 'Give a short description of your project here.',
    url: 'https://reactresume.com',
    image: porfolioImage2,
  },
  {
    title: 'Project title 3',
    description: 'Give a short description of your project here.',
    url: 'https://reactresume.com',
    image: porfolioImage3,
  },
  {
    title: 'Project title 4',
    description: 'Give a short description of your project here.',
    url: 'https://reactresume.com',
    image: porfolioImage4,
  },
  {
    title: 'Project title 5',
    description: 'Give a short description of your project here.',
    url: 'https://reactresume.com',
    image: porfolioImage5,
  },
  {
    title: 'Project title 6',
    description: 'Give a short description of your project here.',
    url: 'https://reactresume.com',
    image: porfolioImage6,
  },
  {
    title: 'Project title 7',
    description: 'Give a short description of your project here.',
    url: 'https://reactresume.com',
    image: porfolioImage7,
  },
  {
    title: 'Project title 8',
    description: 'Give a short description of your project here.',
    url: 'https://reactresume.com',
    image: porfolioImage8,
  },
  {
    title: 'Project title 9',
    description: 'Give a short description of your project here.',
    url: 'https://reactresume.com',
    image: porfolioImage9,
  },
  {
    title: 'Project title 10',
    description: 'Give a short description of your project here.',
    url: 'https://reactresume.com',
    image: porfolioImage10,
  },
  {
    title: 'Project title 11',
    description: 'Give a short description of your project here.',
    url: 'https://reactresume.com',
    image: porfolioImage11,
  },
];

/**
 * Resume section -- TODO: Standardize resume contact format or offer MDX
 */
export const education: TimelineItem[] = [
  {
    date: 'April 2007',
    location: 'Clown college',
    title: 'Masters in Beer tasting',
    content: <p>Describe your experience at school, what you learned, what useful skills you have acquired etc.</p>,
  },
  {
    date: 'March 2003',
    location: 'School of Business',
    title: 'What did you study 101',
    content: <p>Describe your experience at school, what you learned, what useful skills you have acquired etc.</p>,
  },
];

export const experience: TimelineItem[] = [
  {
    date: 'March 2010 - Present',
    location: 'Awesome Development Company',
    title: 'Senior UX Engineer',
    content: (
      <p>
        Describe work, special projects, notable achievements, what technologies you have been working with, and
        anything else that would be useful for an employer to know.
      </p>
    ),
  },
  {
    date: 'March 2007 - February 2010',
    location: 'Garage Startup Studio',
    title: 'Junior bug fixer',
    content: (
      <p>
        Describe work, special projects, notable achievements, what technologies you have been working with, and
        anything else that would be useful for an employer to know.
      </p>
    ),
  },
];

/**
 * Testimonial section
 */
export const testimonial: TestimonialSection = {
  imageSrc: testimonialImage,
  testimonials: [
    {
      name: 'John Doe',
      text: 'Use this as an opportunity to promote what it is like to work with you. High value testimonials include ones from current or past co-workers, managers, or from happy clients.',
      image: 'https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/169.jpg',
    },
    {
      name: 'Jane Doe',
      text: 'Here you should write some nice things that someone has said about you. Encourage them to be specific and include important details (notes about a project you were on together, impressive quality produced, etc).',
      image: 'https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/14.jpg',
    },
    {
      name: 'Someone else',
      text: 'Add several of these, and keep them as fresh as possible, but be sure to focus on quality testimonials with strong highlights of your skills/work ethic.',
      image: 'https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/69.jpg',
    },
  ],
};

/**
 * Contact section
 */

export const contact: ContactSection = {
  headerText: 'Get in touch.',
  description: 'Here is a good spot for a message to your readers to let them know how best to reach out to you.',
  items: [
    {
      type: ContactType.Email,
      text: 'reachout@timbaker.me',
      href: 'mailto:reachout@timbaker.me',
    },
    {
      type: ContactType.Location,
      text: 'Victoria BC, Canada',
      href: 'https://www.google.ca/maps/place/Victoria,+BC/@48.4262362,-123.376775,14z',
    },
    {
      type: ContactType.Instagram,
      text: '@tbakerx',
      href: 'https://www.instagram.com/tbakerx/',
    },
    {
      type: ContactType.Github,
      text: 'tbakerx',
      href: 'https://github.com/tbakerx',
    },
  ],
};

/**
 * Social items
 */
export const socialLinks: Social[] = [
  {label: 'Github', Icon: GithubIcon, href: 'https://github.com/tbakerx'},
  {label: 'Stack Overflow', Icon: StackOverflowIcon, href: 'https://stackoverflow.com/users/8553186/tim-baker'},
  {label: 'LinkedIn', Icon: LinkedInIcon, href: 'https://www.linkedin.com/in/timbakerx/'},
  {label: 'Instagram', Icon: InstagramIcon, href: 'https://www.instagram.com/reactresume/'},
  {label: 'Twitter', Icon: TwitterIcon, href: 'https://twitter.com/TimBakerx'},
];
